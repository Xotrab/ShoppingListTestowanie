<div class="creator-container">
    <h2>
        Create your shopping list
    </h2>
    <mat-card>
        <div class="creator-container__card-input-row">
            <mat-form-field class="input">
                <mat-label>
                    Shopping list name
                </mat-label>
                <input matInput  [(ngModel)]="shoppingList.name">
            </mat-form-field>
            <mat-form-field class="input">
                <input matInput readonly [ngxMatDatetimePicker]="pickerFrom" placeholder="Shopping deadline" [(ngModel)]="shoppingList.deadline">
                <mat-datepicker-toggle matSuffix [for]="$any(pickerFrom)"></mat-datepicker-toggle>
                <ngx-mat-datetime-picker #pickerFrom [hideTime]="true"></ngx-mat-datetime-picker>
            </mat-form-field>
        </div>
        <mat-divider></mat-divider>
        <div style="margin-top: 2rem; margin-bottom: 1rem;">
            Add the shopping list item:
        </div>
        <mat-radio-group [(ngModel)]="selectedMode" style="display: flex; gap: 1rem; margin-bottom: 0.25rem;">
            <mat-radio-button [value]="itemMode.Common" (change)="resetShoppingItemName()">
                commonly used item
            </mat-radio-button>
            <mat-radio-button [value]="itemMode.Own" (change)="resetShoppingItemName()">
                your own item
            </mat-radio-button>
        </mat-radio-group>
        <div class="creator-container__card-input-row">
            <mat-form-field class="input" *ngIf="selectedMode === itemMode.Common">
                <mat-label>
                    Item name
                </mat-label>
                <mat-select [(ngModel)]="newItem.name">
                    <mat-option *ngFor="let item of commonItems" [value]="item">
                        {{ item }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="input" *ngIf="selectedMode === itemMode.Own">
                <mat-label>
                    Item name
                </mat-label>
                <input matInput [(ngModel)]="newItem.name">
            </mat-form-field>
            <mat-form-field class="input">
                <mat-label>
                    Quantity
                </mat-label>
                <input matInput type="number" min="0.1" step="0.1" [(ngModel)]="newItem.quantity">
            </mat-form-field>
            <mat-form-field class="input">
                <mat-label>
                    Unit
                </mat-label>
                <mat-select [(ngModel)]="newItem.unit">
                    <mat-option *ngFor="let unit of defaultUnits" [value]="unit">
                        {{ unit }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <button mat-raised-button color="primary" (click)="addItem()">
            Add item
        </button>
    </mat-card>
    <h2 style="margin-top: 1rem;">
        Shopping list items
    </h2>
    <mat-card style="padding: 0;">
        <table mat-table [dataSource]="dataSource">
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef> No. </th>
              <td mat-cell *matCellDef="let i=index"> {{i+1}} </td>
            </ng-container>
            <ng-container matColumnDef="item">
              <th mat-header-cell *matHeaderCellDef> Item </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
            <ng-container matColumnDef="quantity">
              <th mat-header-cell *matHeaderCellDef> Quantity </th>
              <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
            </ng-container>
            <ng-container matColumnDef="unit">
              <th mat-header-cell *matHeaderCellDef> Unit </th>
              <td mat-cell *matCellDef="let element"> {{element.unit}} </td>
            </ng-container>
            <ng-container matColumnDef="remove">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let i=index;">
                    <button mat-stroked-button color="warn" (click)="removeItem(i)">
                        Remove
                    </button>
                </td>
              </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" [attr.colspan]="displayedColumns.length">
                  No items have been added yet
                </td>
            </tr>
          </table>
    </mat-card>
    <div style="display: flex; gap: 2rem;">
        <button mat-raised-button style="margin-top: 2rem;" [routerLink]="['/home']">
            Cancel
        </button>
        <button mat-raised-button color="primary" style="margin-top: 2rem; width: 30%;" (click)="createShoppingList()">
            Create shopping list
        </button>
    </div>
</div>
